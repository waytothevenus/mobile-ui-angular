<!DOCTYPE HTML><html lang="en" itemscope="" itemtype="http://schema.org/Article"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="Maurizio Casimirri (http://github.com/mcasimir)"><title>drag | Mobile Angular UI</title><link rel="publisher" href="https://plus.google.com/+MobileangularuiGp"><meta name="twitter:image:src" itemprop="image" property="og:image" content="/assets/img/og-logo.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@mobileangularui"><meta name="twitter:creator" content="@mauriziocas"><meta property="og:site_name" content="Mobile Angular UI"><meta property="og:type" content="article"><meta property="og:url" content="http://mobileangularui.com/docs/module:mobile-angular-ui/module:gestures/module:drag"><link href="/assets/css/main.css" rel="stylesheet"><link rel="shortcut icon" href="/assets/img/favicon.png"><!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]--></head><body><div class="navbar navbar-default"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-nav"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/"><span class="logo">Mobile Angular UI</span></a></div><div class="collapse navbar-collapse navbar-collapse-nav"><ul class="nav navbar-nav navbar-right"><li><a href="/demo">Demo</a></li><li><a href="/docs">Docs</a></li><li><a href="/apps">Apps</a></li><li><a href="/blog">Blog</a></li><li><a href="/forum">Forum</a></li><li><a href="https://github.com/mcasimir/mobile-angular-ui" target="_blank"><i class="fa fa-github"></i> Sources</a></li></ul></div></div></div><div class="heading"><div class="container"><h1>drag</h1><div class="heading-description">module</div></div></div><div class="banner banner-crumbs"><div class="container"><a href="https://github.com/mcasimir/mobile-angular-ui/blob/master/src/js/gestures/drag.js" target="blank" class="pull-right"><small><i class="fa fa-pencil"></i> Source</small></a><ol class="breadcrumb"><li><a href="/">Home</a></li><li><a href="/docs">Docs</a></li><li><a href="/docs/module:mobile-angular-ui">mobile-angular-ui</a></li><li><a href="/docs/module:mobile-angular-ui/module:gestures">gestures</a></li><li class="active">drag</li></ol></div></div><div class="container"><div class="row"><div class="sidebar-container col-sm-2" role="aside"><div class="h6 small text-muted">drag</div><ul class="toc sidebar nav" id="toc"><li class="toc1 toc-item"><a href="#usage">Usage</a><ul class="nav"><li class="toc2 toc-item"><a href="#predefined-transforms">Predefined transforms</a></li><li class="toc2 toc-item"><a href="#-ui-drag-move-style">.ui-drag-move style</a></li><li class="toc2 toc-item"><a href="#examples">Examples</a></li><li class="toc3 toc-item"><a href="#limit-movement-to-an-element">Limit movement to an element</a></li></ul></li></ul><hr class="visible-xs-block"></div><div class="content col-sm-10 col-md-8" role="main"><div id="docs-contents"><p><code>mobile-angular-ui.gestures.drag</code> module exposes the <code>$drag</code> service that is used to handle drag gestures. <code>$drag</code> service wraps <a href="../module:touch">$touch</a> service adding CSS transforms reacting to <code>touchmove</code> events.</p><h2 id="usage">Usage</h2><pre><code class="lang-js">angular.module(<span class="hljs-string">&apos;myApp&apos;</span>, [<span class="hljs-string">&apos;mobile-angular-ui.gestures&apos;</span>]);
</code></pre><p>Or</p><pre><code class="lang-js">angular.module(<span class="hljs-string">&apos;myApp&apos;</span>, [<span class="hljs-string">&apos;mobile-angular-ui.gestures.drag&apos;</span>]);
</code></pre><pre><code class="lang-js"><span class="hljs-keyword">var</span> dragOptions = {
  transform: $drag.TRANSLATE_BOTH,
  start:  <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dragInfo, event)</span></span>{},
  end:    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dragInfo, event)</span></span>{},
  move:   <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dragInfo, event)</span></span>{},
  cancel: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dragInfo, event)</span></span>{}
};

$drag.bind(element, dragOptions, touchOptions);
</code></pre><p>Where:</p><ul><li><code>transform</code> is a <code>function(element, currentTransform, touch) -&gt; newTransform</code> returning taking an <code>element</code>, its <code>currentTransform</code> and returning the <code>newTransform</code> for the element in response to <code>touch</code>. See <a href="../module:transform">$transform</a> for more. Default to <code>$drag.TRANSLATE_BOTH</code>.</li><li><code>start</code>, <code>end</code>, <code>move</code>, <code>cancel</code> are optional callbacks responding to <code>drag</code> movement phases.</li><li><code>dragInfo</code> is an extended version of <code>touchInfo</code> from <a href="../module:touch">$touch</a>, extending it with:<ul><li><code>originalTransform</code>: The <a href="../module:transform">$transform</a> object relative to CSS transform before <code>$drag</code> is bound.</li><li><code>originalRect</code>: The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element.getBoundingClientRect">Bounding Client Rect</a> for bound element before any drag action.</li><li><code>startRect</code>: The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element.getBoundingClientRect">Bounding Client Rect</a> for bound element registered at <code>start</code> event.</li><li><code>startTransform</code>: The <a href="../module:transform">$transform</a> at <code>start</code> event.</li><li><code>rect</code>: The current <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element.getBoundingClientRect">Bounding Client Rect</a> for bound element.</li><li><code>transform</code>: The current <a href="../module:transform">$transform</a>.</li><li><code>reset</code>: A function restoring element to <code>originalTransform</code>.</li><li><code>undo</code>: A function restoring element to <code>startTransform</code>.</li></ul></li><li><code>touchOptions</code> is an option object to be passed to underlying <a href="../module:touch"><code>$touch</code></a> service.</li></ul><h3 id="predefined-transforms">Predefined transforms</h3><ul><li><code>$drag.NULL_TRANSFORM</code>: No transform follow movement</li><li><code>$drag.TRANSLATE_BOTH</code>: Transform translate following movement on both x and y axis.</li><li><code>$drag.TRANSLATE_HORIZONTAL</code>: Transform translate following movement on x axis.</li><li><code>$drag.TRANSLATE_UP</code>: Transform translate following movement on negative y axis.</li><li><code>$drag.TRANSLATE_DOWN</code>: Transform translate following movement on positive y axis.</li><li><code>$drag.TRANSLATE_LEFT</code>: Transform translate following movement on negative x axis.</li><li><code>$drag.TRANSLATE_RIGHT</code>: Transform translate following movement on positive x axis.</li><li><code>$drag.TRANSLATE_VERTICAL</code>: Transform translate following movement on y axis.</li><li><p><code>$drag.TRANSLATE_INSIDE</code>: Is a function and should be used like:</p><pre><code class="lang-js">  { 
    transform: $drag.TRANSLATE_INSIDE(myElement)
  }
</code></pre><p>It returns a transform function that contains translate movement inside the passed element.</p></li></ul><h3 id="-ui-drag-move-style"><code>.ui-drag-move</code> style</h3><p>While moving an <code>.ui-drag-move</code> class is attached to element. Style for this class is defined via <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet.insertRule">insertRule</a> and aims to fix common problems while dragging, specifically:</p><ul><li>Brings the element in front of other elements</li><li>Disable transitions</li><li>Makes text unselectable <em>NOTE*</em> Transitions are disabled cause they may introduce conflicts between <code>transition: transform</code> and <code>dragOptions.transform</code> function.</li></ul><p>They will be re-enabled after drag, and this can be used to achieve some graceful effects.</p><p>If you need transition that does not involve transforms during movement you can apply them to an inner or wrapping element.</p><h3 id="examples">Examples</h3><h4 id="limit-movement-to-an-element">Limit movement to an element</h4><pre><code class="lang-js">app.directive(<span class="hljs-string">&apos;dragMe&apos;</span>, [<span class="hljs-string">&apos;$drag&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($drag)</span></span>{
  <span class="hljs-keyword">return</span> {
    controller: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($scope, $element)</span> </span>{
      $drag.bind($element, 
        {
          transform: $drag.TRANSLATE_INSIDE($element.parent()),
          end: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(drag)</span> </span>{
            drag.reset();
          }
        },
        { <span class="hljs-comment">// release touch when movement is outside bounduaries</span>
          sensitiveArea: $element.parent()
        }
      );
    }
  };
}]);
</code></pre><iframe class="embedded-example" src="/examples/drag.html"></iframe></div><hr><div id="disqus_thread"></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'mobileangularui'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div><aside class="col-md-2" role="aside"><hr class="visible-xs-block"><div class="doc-menu"><div class="h5">Basics</div><ul class="nav"><li><a href="/docs">Start to Learn</a></li><li><a href="/docs/getting-started">Getting Started</a></li></ul><div class="h5">Components</div><ul class="nav"><li><a href="/docs/accordion">Accordion</a></li><li><a href="/docs/dropdowns">Dropdowns</a></li><li><a href="/docs/modals">Modals And Overlays</a></li><li><a href="/docs/navbars">Navbars</a></li><li><a href="/docs/scrollable-areas">Scrollable Areas</a></li><li><a href="/docs/sections">Sections</a></li><li><a href="/docs/segmented-navigation">Segmented Navigation</a></li><li><a href="/docs/sidebars">Sidebars</a></li><li><a href="/docs/switches">Toggle Switch</a></li><li><a href="/docs/tabs">Tabs</a></li></ul><div class="h5">API Docs</div><ul class="nav"><li><a href="/docs/module:mobile-angular-ui">mobile-angular-ui</a><ul><li><a href="/docs/module:mobile-angular-ui/module:gestures">gestures</a><ul><li><a class="active" href="/docs/module:mobile-angular-ui/module:gestures/module:drag">drag</a></li><li><a href="/docs/module:mobile-angular-ui/module:gestures/module:swipe">swipe</a></li><li><a href="/docs/module:mobile-angular-ui/module:gestures/module:touch">touch</a></li><li><a href="/docs/module:mobile-angular-ui/module:gestures/module:transform">transform</a></li></ul></li><li><a href="/docs/module:mobile-angular-ui/module:components">components</a><ul><li><a href="/docs/module:mobile-angular-ui/module:components/module:modals">modals</a></li><li><a href="/docs/module:mobile-angular-ui/module:components/module:navbars">navbars</a></li><li><a href="/docs/module:mobile-angular-ui/module:components/module:scrollable">scrollable</a></li><li><a href="/docs/module:mobile-angular-ui/module:components/module:sidebars">sidebars</a></li><li><a href="/docs/module:mobile-angular-ui/module:components/module:switch">switch</a></li></ul></li><li><a href="/docs/module:mobile-angular-ui/module:core">core</a><ul><li><a href="/docs/module:mobile-angular-ui/module:core/module:activelinks">activeLinks</a></li><li><a href="/docs/module:mobile-angular-ui/module:core/module:capture">capture</a></li><li><a href="/docs/module:mobile-angular-ui/module:core/module:outerclick">outerClick</a></li><li><a href="/docs/module:mobile-angular-ui/module:core/module:sharedstate">sharedState</a></li><li><a href="/docs/module:mobile-angular-ui/module:core/module:touchmovedefaults">touchmoveDefaults</a></li></ul></li></ul></li></ul></div></aside></div></div><footer class="footer"><div class="container"><p>Mobile Angular Ui is made for you by <a href="https://github.com/mcasimir" target="_blank">mcasimir</a></p><p><ul class="list-inline"><li><a target="blank" href="https://github.com/mcasimir/mobile-angular-ui"><i class="fa fa-github"></i> Github</a></li><li><a target="blank" href="https://plus.google.com/+MobileangularuiGp"><i class="fa fa-google-plus"></i> Google+</a></li><li><a target="blank" href="https://twitter.com/mobileangularui"><i class="fa fa-twitter"></i> Twitter</a></li><li><a href="mailto:mobileangularui@gmail.com"><i class="fa fa-envelope"></i> Mail</a></li></ul></p><p>Published under the <a href="https://raw.githubusercontent.com/mcasimir/mobile-angular-ui/master/LICENSE">MIT license</a></p></div></footer><script src="/assets/js/main.js"></script></body></html>